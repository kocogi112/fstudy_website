(()=>{"use strict";var t={};var e=function t(e,a){var n=wp.i18n.__;var o=e||{},i=o.data,r=i===void 0?{}:i;var s=r.message,c=s===void 0?a||n("Something Went Wrong!","tutor"):s;return c};jQuery(document).ready((function(t){"use strict";var a=wp.i18n.__;t(document).on("click",".btn-csv-download",(function(a){a.preventDefault();var n=t(this);t.ajax({url:ajaxurl,type:"POST",data:{quiz_id:t(this).data("id"),action:"quiz_export_data"},beforeSend:function t(){n.addClass("is-loading")},success:function t(a){if(!a.success){tutor_toast("Error!",e(a),"error");return}var n="";a.data.output_quiz_data.forEach((function(t){var e=t.join(",");n+=e+"\r\n"}));var o=new Blob([n],{type:"text/csv"});var i=window.webkitURL.createObjectURL(o);var r=document.createElement("a");r.setAttribute("href",i);r.setAttribute("download","tutor-quiz-"+a.data.title+".csv");document.body.appendChild(r);r.click()},complete:function t(){n.removeClass("is-loading")}})}));t(document).on("change",'#tutor-course-content-builder-root input[name="csv_file"]',(function(a){var n=t(this).prop("files");var o=t(this);var i=t(this).parent().find("button");if(n[0]){if(n[0].size>0){var r=tutor_get_nonce_data(true);var s=new FormData;s.append("action","quiz_import_data");s.append("csv_file",n[0]);s.append("topic_id",t(this).parent().find("input[name='csv_file']").data("topic"));s.append(r.key,r.value);t.ajax({url:ajaxurl,type:"POST",data:s,cache:false,contentType:false,processData:false,beforeSend:function t(){i.addClass("is-loading")},success:function t(a){if(a.success){o.val("");o.closest(".tutor-topics-wrap").find(".tutor-lessons").append(a.data.html)}else{tutor_toast("Error",e(a),"error")}},complete:function t(){i.removeClass("is-loading")}})}else{alert("File is Empty.")}}else{alert("No File Selected.")}t(this).val("")}));t(document).on("click",".tutor-import-quiz-button button",(function(e){e.preventDefault();t(this).parent().find(".tutor-csv-file").click()}))}))})();